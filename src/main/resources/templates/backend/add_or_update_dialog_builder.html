<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="zh-CN">
<head>


</head>

<body id="add_or_update_dialog_builder_body">


<script th:inline="javascript">
    /*<![CDATA[*/
    const InputType = {TEXT: 1, SELECT: 2, CHECKBOX: 3};
    var AddOrUpdateDialogBuilder = function () {
        this.onSubmit = undefined;
        this.onCancel = undefined;
        this.$dialog = undefined;
        this.$form = undefined;
        this.$submitBtn = undefined;
        this.$cancelBtn = undefined;
        this.fileds = undefined;

        this.echoData = function (args) {
            var data = args.data;
//            {
//                name:'username',
//                filter:filter,
//                value:'666',
//                inputType:inputType
//            }
            for (var index = 0; index < this.fileds.length; index++) {
                var filed = this.fileds[index];
                var name = filed.name;
                var filter = filed.filter;
                var inputType = filed.inputType;
                var value = data[name];
                if (!isUndefined(filter)) {
                    value = filter(value);
                }
                if (inputType == InputType.TEXT) {
                    this.findInput(name).val(value);
                }

                if (inputType == InputType.SELECT) {
                    selectOption(name, value);
                }
                if (inputType == InputType.CHECKBOX) {
                    this.findInput(name).val(value);
                }
            }


        };
        this.findInput = function (name) {
            return this.$form.find("input[name='" + name + "']");
        };

        this.hide = function () {
            this.$dialog.modal('hide');
        };
        this.show = function () {
            this.$dialog.modal('show');
        };

        this.init = function (args) {

            this.$dialog = $(args.dialogId);
            this.$form = this.$dialog.find("form");
            this.$submitBtn = this.$dialog.find(args.submitId);
            this.$cancelBtn = this.$dialog.find(args.cancelId);
            this.onSubmit = args.onSubmit;
            this.onCancel = args.onCancel;
            this.fileds = args.fileds;

            this.$submitBtn.unbind("click");
            this.$submitBtn.click(function () {

                this.hide();
                if (!isUndefined(this.onSubmit)) {
                    var data = this.$form.serializeObject();
                    this.onSubmit(data);
                }
            }.bind(this));
            this.$cancelBtn.unbind("click");
            this.$cancelBtn.click(function () {
                this.hide();
                if (!isUndefined(this.onCancel)) {
                    this.onCancel();
                }

            }.bind(this));
        };
    }


    /*]]>*/

</script>
</body>

</html>
